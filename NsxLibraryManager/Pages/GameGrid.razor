@page "/gameGrid"
@using NsxLibraryManager.Extensions
@using NsxLibraryManager.Models.Dto

<RadzenCard>
    <RadzenText TextStyle="TextStyle.Subtitle2" TagName="TagName.H3">Filter by Name or TitleId</RadzenText>
    <RadzenTextBox @oninput=@(args => OnFilterChange(args.Value.ToString(), "titleName")) Style="width: 100%" aria-label="Search by TitleId Or Name" />
</RadzenCard>

@{
    var groupSize = 5; 
    var gameList = _games.ToList(); 
    var totalCards = _games.Count();
}

@for (var i = 0; i < totalCards; i += groupSize)
{
    var currentGroup = gameList.Skip(i).Take(groupSize);
        <RadzenCardGroup Responsive="true" Style="padding-bottom: 3px">
            @foreach (var game in currentGroup)
            {
                <RadzenCard Style="padding: 0; margin: 0">
                    @if (!string.IsNullOrEmpty(game.IconUrl))
                    {
                        <RadzenStack Orientation="Orientation.Horizontal" Style="max-width: 245px; padding: 0; margin: 0; min-width: 147px">
                            <RadzenImage Path="@game.IconUrl" Style="width: 100%; height: 100%; "/>
                        </RadzenStack>
                    }
                    else
                    {
                        <RadzenStack Orientation="Orientation.Horizontal" Style="max-width: 245px; padding: 0; margin: 0; min-width: 147px">
                            <RadzenImage Path="images/no-image.jpg" Style="width: 100%; height: 100%; "/>
                        </RadzenStack>
                        <RadzenStack Orientation="Orientation.Horizontal" Style="max-width: 245px; padding: 0; margin: 0; min-width: 147px">
                            @game.TitleName
                        </RadzenStack>
                    }
                </RadzenCard>
            }
        </RadzenCardGroup>
}
    
<RadzenPager @ref="@pager" Density="@Density.Compact" ShowPagingSummary="true" PagingSummaryFormat="@_pagingSummaryFormat"
             HorizontalAlign="HorizontalAlign.Right" Count="_count"
             PageSize="@_pageSize" PageNumbersCount="5" PageChanged="@PageChanged"/>
             